- name: Install TokuDB Engine
  package:
    name: MariaDB-tokudb-engine
    state: installed
    enablerepo: mariadb
  when: rhel_version == 7

- name: Add jemalloc rpm for Centos 8
  dnf:
    name: http://rpms.remirepo.net/enterprise/8/remi/x86_64//jemalloc-5.1.0-3.el8.remi.x86_64.rpm
    state: present
  when: rhel_version == 8

- name: Install jemalloc for Centos 8
  dnf:
    name: jemalloc
    state: present
    enablerepo: remi
  when: rhel_version == 8

- name: Install TokuDB Engine Centos 8
  yum:
    name: http://archive.mariadb.org/mariadb-10.3.18/yum/centos/8/x86_64/rpms/MariaDB-tokudb-engine-10.3.18-1.el8.x86_64.rpm
    state: present
  when: rhel_version == 8

- name: Restart MariaDB service
  service:
    name: mariadb
    state: restarted
