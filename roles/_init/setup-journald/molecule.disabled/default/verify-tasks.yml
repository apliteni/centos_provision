- name: Get journald log dir stats
  stat:
    path: /var/log/journal
  register: journald_log_path_stats

- name: Test swap file is present
  debug:
    var: journald_log_path_stats
  failed_when: not journald_log_path_stats.stat.exists

- name: Check journald.conf contains correct entries
  lineinfile:
    path: /etc/systemd/journald.conf
    line: '{{ item.name }}={{ item.value }}'
    state: present
  check_mode: yes
  register: result
  failed_when: result is changed
  with_items: "{{ journald_parameters }}"
