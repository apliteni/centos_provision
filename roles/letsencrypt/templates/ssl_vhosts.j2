server {
    listen 443 default_server ssl;

    server_name {{ site_domains }};

    ssl_certificate /etc/letsencrypt/live/{{ letsencrypt_cert_domains[0] }}/fullchain.pem;
    ssl_certificate_key /etc/letsencrypt/live/{{ letsencrypt_cert_domains[0] }}/privkey.pem;

    ssl_session_cache   shared:SSL:10m;
    ssl_session_timeout 10m;

    ssl_prefer_server_ciphers on;

    add_header Strict-Transport-Security max-age=15768000;
    add_header X-Content-Type-Options nosniff;

    ssl_dhparam /etc/ssl/certs/dhparam.pem;

    {% if nginx_vhost.root is defined %}
    root {{ nginx_vhost.root }};
    {% endif %}

    index {{ nginx_vhost.index }};

    {% if nginx_vhost.error_page is defined %}
    error_page {{ nginx_vhost.error_page }};
    {% endif %}
    {% if nginx_vhost.access_log is defined %}
    access_log {{ nginx_vhost.access_log }};
    {% endif %}
    {% if nginx_vhost.error_log is defined %}
    error_log {{ nginx_vhost.error_log }} error;
    {% endif %}

    {% if nginx_vhost.return is defined %}
    return {{ nginx_vhost.return }};
    {% endif %}

    {% if nginx_vhost.extra_parameters is defined %}
    {{ nginx_vhost.extra_parameters }}
    {% endif %}
}
