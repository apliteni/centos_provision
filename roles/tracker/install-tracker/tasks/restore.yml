- name: Get mime of dump
  command: "file '{{ db_restore_path }}' --mime-type --brief"
  args:
    chdir: ../../
  changed_when: false
  register: db_restore_dump_file_mime

- name: Restore DB from gzipped SQL dump
  include: restore/restore-from-dump.yml cat=zcat
  when: "db_restore_dump_file_mime.stdout == 'application/x-gzip'"

- name: Restore DB from unpacked SQL dump
  include: restore/restore-from-dump.yml cat=cat
  when: "db_restore_dump_file_mime.stdout != 'application/x-gzip'"
