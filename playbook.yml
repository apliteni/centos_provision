- hosts: all
  connection: local
  gather_facts: false
  become: true
  become_method: sudo

  roles:
    - {role: '_init/_init',                                 tags: 'init,                        always'}
    - {role: '_init/_install-packages',                     tags: 'install-packages'}
    - {role: '_init/_prepare-upgrade',                      tags: 'prepare-upgrade,             upgrade'}
    - {role: '_init/_remove-x3-ca',                         tags: 'remove-x3-ca'}
    - {role: '_init/create-tracker-user-and-dirs',          tags: 'create-tracker-user-and-dirs'}
    - {role: '_init/disable-selinux',                       tags: 'disable-selinux'}
    - {role: '_init/disable-thp',                           tags: 'disable-thp'}
    - {role: '_init/install-certs',                         tags: 'install-certs'}
    - {role: '_init/install-chrony',                        tags: 'install-chrony'}
    - {role: '_init/install-docker',                        tags: 'install-docker'}
    - {role: '_init/install-fail2ban',                      tags: 'install-fail2ban'}
    - {role: '_init/install-firewalld',                     tags: 'install-firewalld'}
    - {role: '_init/install-kctl-tools',                    tags: 'install-kctl-tools'}
    - {role: '_init/install-postfix',                       tags: 'install-postfix'}
    - {role: '_init/setup-journald',                        tags: 'setup-journald'}
    - {role: '_init/setup-timezone',                        tags: 'setup-timezone'}
    - {role: '_init/tune-swap',                             tags: 'tune-swap,                    tune'}
    - {role: '_init/tune-sysctl',                           tags: 'tune-sysctl,                  tune'}
    - {role: 'clickhouse/install-clickhouse',               tags: 'install-clickhouse'}
    - {role: 'mariadb/install-mariadb',                     tags: 'install-mariadb'}
    - {role: 'mariadb/tune-mariadb',                        tags: 'tune-mariadb,                 tune'}
    - {role: 'mariadb/wrap-up-db-configuration',            tags: 'wrap-up-db-configuration'}
    - {role: 'nginx/install-nginx',                         tags: 'install-nginx'}
    - {role: 'nginx/tune-nginx',                            tags: 'tune-nginx,                   tune'}
    - {role: 'php/install-php',                             tags: 'install-php'}
    - {role: 'php/install-roadrunner',                      tags: 'install-roadrunner'}
    - {role: 'php/tune-php',                                tags: 'tune-php,                     tune'}
    - {role: 'php/tune-roadrunner',                         tags: 'tune-roadrunner,              tune'}
    - {role: 'redis/install-redis',                         tags: 'install-redis'}
    - {role: 'clickhouse/install-clickhouse',               tags: 'install-clickhouse'}
    - {role: 'redis/tune-redis',                            tags: 'tune-redis,                   tune'}
    - {role: 'tracker/install-tracker',                     tags: 'install-tracker'}
    - {role: 'tracker/upgrade-tracker',                     tags: 'upgrade-tracker,              never'}
    - {role: 'tracker/set-permissions',                     tags: 'set-permissions,              always'}
    - {role: 'tracker/wrap-up-tracker-configuration',       tags: 'wrap-up-tracker-configuration'}
    - {role: 'wrap-up/finish-installation',                 tags: 'finish-installation'}
    - {role: 'wrap-up/finish-upgrade',                      tags: 'finish-upgrade,               upgrade'}
    - {role: 'wrap-up/run-final-steps',                     tags: 'run-final-steps,              always'}
